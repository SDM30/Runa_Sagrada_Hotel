<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="description" content="Runa Sagrada - Panel de Administración" />
    <meta name="keywords" content="staff, dashboard, gestión, clientes" />
    <meta name="author" content="Runa Sagrada" />

    <title>Admin Dashboard - Runa Sagrada</title>

    <!-- Preload critical assets -->
    <link rel="preload" th:href="@{/images/logito.png}" as="image" />

    <!-- Stylesheets -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
      crossorigin="anonymous"
    />
    <link rel="stylesheet" th:href="@{/styles/styles.css}" />
    <link rel="stylesheet" th:href="@{/styles/styles1.css}" />
  </head>
  <body class="dashboard-container">
    <button
      class="sidebar-toggle d-lg-none"
      type="button"
      id="sidebarToggle"
      aria-controls="sidebar"
      aria-expanded="false"
      aria-label="Alternar navegación"
    >
      <i class="fas fa-bars"></i>
    </button>
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-header">
        <img
          th:src="@{/images/logito.png}"
          alt="Runa Sagrada"
          class="sidebar-logo"
        />
        <h2 class="sidebar-title">Staff Panel</h2>
      </div>

      <nav
        class="sidebar-nav nav flex-column"
        id="sidebarTab"
        role="tablist"
        aria-orientation="vertical"
      >
        <a
          class="sidebar-nav-link"
          data-bs-toggle="tab"
          href="#dashboard"
          role="tab"
          aria-controls="dashboard"
          aria-selected="true"
        >
          <i class="sidebar-nav-icon fas fa-chart-pie"></i
          ><span>Dashboard</span>
        </a>

        <a
          class="sidebar-nav-link"
          data-bs-toggle="tab"
          href="#recepcion"
          role="tab"
          aria-controls="recepcion"
          aria-selected="false"
        >
          <i class="sidebar-nav-icon fas fa-hotel"></i><span>Recepcion</span>
        </a>

        <a
          class="sidebar-nav-link"
          data-bs-toggle="tab"
          href="#ordenes"
          role="tab"
          aria-controls="ordenes"
          aria-selected="false"
        >
          <i class="sidebar-nav-icon fas fa-calendar-check"></i
          ><span>Ordenes</span>
        </a>

        <a
          class="sidebar-nav-link active"
          data-bs-toggle="tab"
          href="#clientes"
          role="tab"
          aria-controls="clientes"
          aria-selected="false"
        >
          <i class="sidebar-nav-icon fas fa-users"></i
          ><span>Gestion Clientes</span>
        </a>

        <a
          class="sidebar-nav-link"
          data-bs-toggle="tab"
          href="#habitaciones"
          role="tab"
          aria-controls="habitaciones"
          aria-selected="false"
        >
          <i class="sidebar-nav-icon fas fa-concierge-bell"></i
          ><span>Gestion Habitaciones</span>
        </a>

        <a
          class="sidebar-nav-link"
          data-bs-toggle="tab"
          href="#staff"
          role="tab"
          aria-controls="staff"
          aria-selected="false"
        >
          <i class="sidebar-nav-icon fas fa-chart-bar"></i
          ><span>Gestion Staff</span>
        </a>

        <a
          class="sidebar-nav-link"
          data-bs-toggle="tab"
          href="#inventarioServicios"
          role="tab"
          aria-controls="inventarioServicios"
          aria-selected="false"
        >
          <i class="sidebar-nav-icon fas fa-cog"></i
          ><span>Gestion Inventario</span>
        </a>
      </nav>
    </aside>

    <!-- Dashboard Header -->
    <header class="dashboard-header">
      <h1 class="dashboard-title">Panel de Administración</h1>
      <p class="dashboard-subtitle">
        Gestiona todos los aspectos de Runa Sagrada desde un solo lugar
      </p>
    </header>

    <!-- Main Content -->
    <main class="main-content tab-content">
      <!-- Tabla Section Clientes-->
      <section class="tabla-section tab-pane fade show active" id="clientes">
        <div class="tabla-header">
          <h2 class="tabla-title">Gestión de Clientes</h2>
          <div class="tabla-actions">
            <button
              class="btn btn-gradient"
              data-bs-toggle="modal"
              data-bs-target="#modalCCliente"
            >
              <i class="fas fa-plus me-2"></i>Agregar Nuevo
            </button>
            <button class="btn btn-outline-light">
              <i class="fas fa-sync-alt me-2"></i>Actualizar
            </button>
          </div>
        </div>

        <div class="tabla-content">
          <div class="table-responsive h-100" th:if="${clients != null}">
            <table class="table table-striped mb-0 h-100">
              <thead>
                <tr>
                  <th scope="col">ID</th>
                  <th scope="col">Nombre Completo</th>
                  <th scope="col">Email</th>
                  <th scope="col">Celular</th>
                  <th scope="col">ID nacional</th>
                  <th scope="col">Acciones</th>
                </tr>
              </thead>
              <tbody>
                <tr th:each="cliente : ${clients}">
                  <td th:text="${cliente.id}"></td>
                  <td th:text="${cliente.user.name}"></td>
                  <td th:text="${cliente.user.email}"></td>
                  <td th:text="${cliente.user.phone}"></td>
                  <td th:text="${cliente.user.nationalId}"></td>
                  <td>
                    <div class="btn-group-glass" role="group">
                      <button
                        type="button"
                        class="btn-glass btn-glass-primary"
                        data-bs-toggle="modal"
                        data-bs-target="#modalUCliente"
                        th:attr="data-id=${cliente.user.id}"
                        title="Editar"
                      >
                        <i class="fas fa-edit"></i>
                      </button>
                      <button
                        type="button"
                        class="btn-glass btn-glass-info"
                        title="Ver detalles"
                      >
                        <i class="fas fa-eye"></i>
                      </button>
                      <a
                        class="btn-glass btn-glass-danger"
                        th:href="@{/client/staff/delete/{id}(id=${cliente.id})}"
                        title="Eliminar"
                      >
                        <i class="fas fa-trash"></i>
                      </a>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="tabla-placeholder" th:if="${clients == null}">
            <i class="fas fa-concierge-bell fa-3x mb-3 text-muted"></i>
            <h3>Gestión de Clientes</h3>
            <p>
              En esta sección puedes gestionar todos los clientes del hotel.
            </p>
            <button class="btn btn-gradient mt-3">
              <i class="fas fa-plus me-2"></i>Registrar Cliente
            </button>
          </div>
        </div>
      </section>

      <!-- Tabla Section Servicios-->
      <section class="tabla-section tab-pane fade" id="servicios">
        <h1>TODO</h1>
      </section>

      <!-- Tabla Section Dashboard-->
      <section class="tabla-section tab-pane fade" id="dashboard">
        <h1>TODO</h1>
      </section>
    </main>

    <!-- Modal Registro Cliente -->
    <div
      class="modal fade"
      id="modalCCliente"
      data-bs-backdrop="static"
      data-bs-keyboard="false"
      tabindex="-1"
      aria-labelledby="staticBackdropLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <form
          th:action="@{/client/staff/add}"
          th:object="${newclientuser}"
          method="post"
          class="modal-content"
        >
          <div class="modal-header">
            <h5 class="modal-title" id="modalClienteLabel">
              Registrar Cliente
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Cerrar"
            ></button>
          </div>
          <div class="modal-body">
            <div class="mb-3">
              <label for="name" class="form-label">Nombre completo</label>
              <input
                type="text"
                class="form-control"
                id="name"
                th:field="*{name}"
              />
            </div>
            <div class="mb-3">
              <label for="email" class="form-label">Email</label>
              <input
                type="email"
                class="form-control"
                id="email"
                th:field="*{email}"
              />
            </div>
            <div class="mb-3">
              <label for="phone" class="form-label">Celular</label>
              <input
                type="text"
                class="form-control"
                id="phone"
                th:field="*{phone}"
              />
            </div>
            <div class="mb-3">
              <label for="dni" class="form-label">ID Nacional</label>
              <input
                type="text"
                class="form-control"
                id="dni"
                th:field="*{nationalId}"
              />
            </div>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Cerrar
            </button>
            <button type="submit" class="btn btn-primary">Registrar</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Modal Actualizar Cliente -->
    <div
      class="modal fade"
      id="modalUCliente"
      data-bs-backdrop="static"
      data-bs-keyboard="false"
      tabindex="-1"
      aria-labelledby="staticBackdropLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <form
          th:action="@{/client/staff/update}"
          th:object="${newclientuser}"
          method="post"
          class="modal-content"
          id="edit-client-form"
        >
          <div class="modal-header">
            <h5 class="modal-title" id="modalClienteLabel">
              Actualizar Datos del Cliente
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Cerrar"
            ></button>
          </div>
          <div class="modal-body">
            <input type="hidden" id="clientIdEdit" th:field="*{id}" />
            <div class="mb-3">
              <label for="nameEdit" class="form-label">Nombre completo</label>
              <input
                type="text"
                class="form-control"
                id="nameEdit"
                th:field="*{name}"
              />
            </div>
            <div class="mb-3">
              <label for="emailEdit" class="form-label">Email</label>
              <input
                type="email"
                class="form-control"
                id="emailEdit"
                th:field="*{email}"
              />
            </div>
            <div class="mb-3">
              <label for="phoneEdit" class="form-label">Celular</label>
              <input
                type="text"
                class="form-control"
                id="phoneEdit"
                th:field="*{phone}"
              />
            </div>
            <div class="mb-3">
              <label for="nationalIdEdit" class="form-label">ID Nacional</label>
              <input
                type="text"
                class="form-control"
                id="nationalIdEdit"
                th:field="*{nationalId}"
              />
            </div>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Cerrar
            </button>
            <button type="submit" class="btn btn-primary">Registrar</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Scripts -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
    <script th:src="@{/js/script.js}" defer></script>
  </body>
</html>
